# unity日志分析系统
要求前后端分离，前端网页设计仅用于用户交互，后端进行日志分析处理。

## 需求概述
一共两个主要功能模块：日志上传和分析结果展示；错误匹配规则管理。

### 日志上传和分析结果展示
用户可以通过3中方式上传日志：
- 通过url上传日志文件，默认方式
- 通过本地文件上传日志文件
- 通过粘贴文本上传日志内容
- 本地上传日志文件运行拖拽上传
- 粘贴文本上传日志内容支持大文本粘贴框(50M)

日志上传后，将相关数据发送至后端进行分析，后端返回分析结果，前端进行展示。
- 所有错误日志按错误类型进行分类展示
- 合并相同错误日志，显示错误出现次数
- 点击错误日志可查看详细信息，包括堆栈信息、出现次数。相同日志有切换按钮可以查看
- 支持搜索功能，可以根据关键词搜索错误日志
- 展示错误日志详情应该同时展示日志上下几行，方便用户查看上下文
- 左侧显示错误日志列表，右侧显示选中日志的详细信息
- 支持分页功能，避免一次性加载过多日志数据
- 错误日志按照严重程度进行排序，严重程度高的日志优先展示
- 错误日志列表显示错误标题、错误类型、出现次数、严重程度等关键信息
- 错误详情展示包括错误标题、错误类型、出现次数、严重程度、错误描述、堆栈信息等
- 堆栈信息需要显示行号，模仿代码编辑器的样式，方便用户阅读，并支持折叠功能

### 错误匹配规则管理
用户可以通过前端界面管理错误匹配规则，规则存储在后端数据库中。
- 支持添加新规则，规则包括错误类型、匹配关键词、严重程度、正则表达式、错误描述、错误标题等信息
- 支持编辑已有规则，修改规则的各项信息
- 支持删除规则，删除后规则不再生效
- 支持规则列表展示，显示所有规则的关键信息
- 支持规则搜索功能，可以根据关键词搜索规则
- 支持规则分页功能，避免一次性加载过多规则数据
- 支持规则导入导出功能，方便用户备份和恢复规则，导入导出使用json格式
- json格式示例：
{
    "id": "3",
    "name": "C# 编译失败",
    "regex": "error CS\\d{4}: (.*)",
    "keywords": [
        "error",
        "CS"
    ],
    "solution": "**编译失败**\n\n修复 C# 语法错误。\n- 检查是否缺少分号。\n- 验证命名空间引用 (using)。\n- 如果刚升级了 Unity，检查 API 是否变更。",
    "severity": "CRITICAL",
    "weight": 100,
    "createdAt": "2025-11-24 06:18:55",
    "updatedAt": "2025-11-24 06:18:55"
},
- 导入json文件支持拖拽上传
- 支持规则版本管理，记录每次规则的修改历史，方便用户查看和恢复历史版本
- 支持验证规则功能，用户可以选择一条或多条规则，输入日志内容，系统返回匹配结果，方便用户测试规则的有效性
- 验证规则功能也支持3中方式输入日志内容：通过url、本地文件、粘贴文本
- 支持规则分类管理，用户可以为规则添加分类标签，方便规则的组织和查找
- 日志规则存储在数据库中
- 支持规则批量操作，用户可以选择多条规则进行批量删除、修改分类标签等操作
- 按照规则的严重程度、创建时间等进行排序，方便用户查找和管理规则

## 技术要求
- 前端使用Vue.js或React进行开发，确保良好的用户体验和响应速度
- 后端使用Node.js、Python Flask或Django进行开发，处理日志分析和规则管理逻辑
- 数据库使用MySQL、PostgreSQL或MongoDB存储日志数据和规则
- 前后端通过RESTful API进行通信，确保数据传输的安全性和效率
- 日志分析模块需要具备高效的文本处理能力，能够快速解析和分类大量日志数据
- 后端支持脚本化部署，方便在不同环境中进行安装和配置
- 系统需要具备良好的扩展性，方便后续添加新功能或优化现有功能
- 提供详细的API文档，方便前后端开发人员进行对接
- 后端匹配日志时，先用关键词进行初步筛选，再用正则表达式进行精确匹配，提高匹配效率；关键词筛选时需要保留一定上下文行数，方便后续正则匹配
- 系统需要具备良好的错误处理机制，能够捕获和记录运行时错误，确保系统稳定运行